{"ast":null,"code":"import _classCallCheck from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _isNativeReflectConstruct from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport _getPrototypeOf from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\n\nimport { Action } from './Action';\nexport var AsyncAction = /*#__PURE__*/function (_Action) {\n  function AsyncAction(scheduler, work) {\n    var _this;\n\n    _classCallCheck(this, AsyncAction);\n\n    _this = _callSuper(this, AsyncAction, [scheduler, work]);\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n\n  _inherits(AsyncAction, _Action);\n\n  return _createClass(AsyncAction, [{\n    key: \"schedule\",\n    value: function schedule(state) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (this.closed) {\n        return this;\n      }\n\n      this.state = state;\n      var id = this.id;\n      var scheduler = this.scheduler;\n\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, delay);\n      }\n\n      this.pending = true;\n      this.delay = delay;\n      this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n      return this;\n    }\n  }, {\n    key: \"requestAsyncId\",\n    value: function requestAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n  }, {\n    key: \"recycleAsyncId\",\n    value: function recycleAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      if (delay !== null && this.delay === delay && this.pending === false) {\n        return id;\n      }\n\n      clearInterval(id);\n      return undefined;\n    }\n  }, {\n    key: \"execute\",\n    value: function execute(state, delay) {\n      if (this.closed) {\n        return new Error('executing a cancelled action');\n      }\n\n      this.pending = false;\n\n      var error = this._execute(state, delay);\n\n      if (error) {\n        return error;\n      } else if (this.pending === false && this.id != null) {\n        this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n      }\n    }\n  }, {\n    key: \"_execute\",\n    value: function _execute(state, delay) {\n      var errored = false;\n      var errorValue = undefined;\n\n      try {\n        this.work(state);\n      } catch (e) {\n        errored = true;\n        errorValue = !!e && e || new Error(e);\n      }\n\n      if (errored) {\n        this.unsubscribe();\n        return errorValue;\n      }\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var id = this.id;\n      var scheduler = this.scheduler;\n      var actions = scheduler.actions;\n      var index = actions.indexOf(this);\n      this.work = null;\n      this.state = null;\n      this.pending = false;\n      this.scheduler = null;\n\n      if (index !== -1) {\n        actions.splice(index, 1);\n      }\n\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n\n      this.delay = null;\n    }\n  }]);\n}(Action); //# sourceMappingURL=AsyncAction.js.map","map":{"version":3,"sources":["C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/rxjs/_esm2015/internal/scheduler/AsyncAction.js"],"names":["Action","AsyncAction","scheduler","work","pending","schedule","state","delay","closed","id","recycleAsyncId","requestAsyncId","setInterval","flush","bind","clearInterval","undefined","execute","Error","error","_execute","errored","errorValue","e","unsubscribe","_unsubscribe","actions","index","indexOf","splice"],"mappings":"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","sourcesContent":["import { Action } from './Action';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, delay) {\n        let errored = false;\n        let errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    _unsubscribe() {\n        const id = this.id;\n        const scheduler = this.scheduler;\n        const actions = scheduler.actions;\n        const index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    }\n}\n//# sourceMappingURL=AsyncAction.js.map"]},"metadata":{},"sourceType":"module"}
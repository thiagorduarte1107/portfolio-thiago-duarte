{"ast":null,"code":"import _get from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/get\";\nimport _classCallCheck from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _isNativeReflectConstruct from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport _getPrototypeOf from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nfunction _superPropGet(t, o, e, r) { var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), o, e); return 2 & r && \"function\" == typeof p ? function (t) { return p.apply(e, t); } : p; }\n\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\n\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var VirtualTimeScheduler = /*#__PURE__*/function (_AsyncScheduler) {\n  function VirtualTimeScheduler() {\n    var _this;\n\n    var SchedulerAction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : VirtualAction;\n    var maxFrames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.POSITIVE_INFINITY;\n\n    _classCallCheck(this, VirtualTimeScheduler);\n\n    _this = _callSuper(this, VirtualTimeScheduler, [SchedulerAction, function () {\n      return _this.frame;\n    }]);\n    _this.maxFrames = maxFrames;\n    _this.frame = 0;\n    _this.index = -1;\n    return _this;\n  }\n\n  _inherits(VirtualTimeScheduler, _AsyncScheduler);\n\n  return _createClass(VirtualTimeScheduler, [{\n    key: \"flush\",\n    value: function flush() {\n      var actions = this.actions,\n          maxFrames = this.maxFrames;\n      var error, action;\n\n      while ((action = actions[0]) && action.delay <= maxFrames) {\n        actions.shift();\n        this.frame = action.delay;\n\n        if (error = action.execute(action.state, action.delay)) {\n          break;\n        }\n      }\n\n      if (error) {\n        while (action = actions.shift()) {\n          action.unsubscribe();\n        }\n\n        throw error;\n      }\n    }\n  }]);\n}(AsyncScheduler);\nVirtualTimeScheduler.frameTimeFactor = 10;\nexport var VirtualAction = /*#__PURE__*/function (_AsyncAction) {\n  function VirtualAction(scheduler, work) {\n    var _this2;\n\n    var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : scheduler.index += 1;\n\n    _classCallCheck(this, VirtualAction);\n\n    _this2 = _callSuper(this, VirtualAction, [scheduler, work]);\n    _this2.scheduler = scheduler;\n    _this2.work = work;\n    _this2.index = index;\n    _this2.active = true;\n    _this2.index = scheduler.index = index;\n    return _this2;\n  }\n\n  _inherits(VirtualAction, _AsyncAction);\n\n  return _createClass(VirtualAction, [{\n    key: \"schedule\",\n    value: function schedule(state) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (!this.id) {\n        return _superPropGet(VirtualAction, \"schedule\", this, 3)([state, delay]);\n      }\n\n      this.active = false;\n      var action = new VirtualAction(this.scheduler, this.work);\n      this.add(action);\n      return action.schedule(state, delay);\n    }\n  }, {\n    key: \"requestAsyncId\",\n    value: function requestAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.delay = scheduler.frame + delay;\n      var actions = scheduler.actions;\n      actions.push(this);\n      actions.sort(VirtualAction.sortActions);\n      return true;\n    }\n  }, {\n    key: \"recycleAsyncId\",\n    value: function recycleAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return undefined;\n    }\n  }, {\n    key: \"_execute\",\n    value: function _execute(state, delay) {\n      if (this.active === true) {\n        return _superPropGet(VirtualAction, \"_execute\", this, 3)([state, delay]);\n      }\n    }\n  }], [{\n    key: \"sortActions\",\n    value: function sortActions(a, b) {\n      if (a.delay === b.delay) {\n        if (a.index === b.index) {\n          return 0;\n        } else if (a.index > b.index) {\n          return 1;\n        } else {\n          return -1;\n        }\n      } else if (a.delay > b.delay) {\n        return 1;\n      } else {\n        return -1;\n      }\n    }\n  }]);\n}(AsyncAction); //# sourceMappingURL=VirtualTimeScheduler.js.map","map":{"version":3,"sources":["C:/Users/Thiago-510/CascadeProjects/portfolio-thiago-duarte/node_modules/rxjs/_esm2015/internal/scheduler/VirtualTimeScheduler.js"],"names":["AsyncAction","AsyncScheduler","VirtualTimeScheduler","SchedulerAction","VirtualAction","maxFrames","Number","POSITIVE_INFINITY","frame","index","flush","actions","error","action","delay","shift","execute","state","unsubscribe","frameTimeFactor","scheduler","work","active","schedule","id","add","requestAsyncId","push","sort","sortActions","recycleAsyncId","undefined","_execute","a","b"],"mappings":"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","sourcesContent":["import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport class VirtualTimeScheduler extends AsyncScheduler {\n    constructor(SchedulerAction = VirtualAction, maxFrames = Number.POSITIVE_INFINITY) {\n        super(SchedulerAction, () => this.frame);\n        this.maxFrames = maxFrames;\n        this.frame = 0;\n        this.index = -1;\n    }\n    flush() {\n        const { actions, maxFrames } = this;\n        let error, action;\n        while ((action = actions[0]) && action.delay <= maxFrames) {\n            actions.shift();\n            this.frame = action.delay;\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\nVirtualTimeScheduler.frameTimeFactor = 10;\nexport class VirtualAction extends AsyncAction {\n    constructor(scheduler, work, index = scheduler.index += 1) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.index = index;\n        this.active = true;\n        this.index = scheduler.index = index;\n    }\n    schedule(state, delay = 0) {\n        if (!this.id) {\n            return super.schedule(state, delay);\n        }\n        this.active = false;\n        const action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        this.delay = scheduler.frame + delay;\n        const { actions } = scheduler;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        return undefined;\n    }\n    _execute(state, delay) {\n        if (this.active === true) {\n            return super._execute(state, delay);\n        }\n    }\n    static sortActions(a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    }\n}\n//# sourceMappingURL=VirtualTimeScheduler.js.map"]},"metadata":{},"sourceType":"module"}